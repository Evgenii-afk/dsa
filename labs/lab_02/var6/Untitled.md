---
jupyter:
  jupytext:
    text_representation:
      extension: .md
      format_name: markdown
      format_version: '1.3'
      jupytext_version: 1.17.3
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
---

### –í–∞—Ä–∏–∞–Ω—Ç 6

## –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞—Å—á–µ—Å–∫–æ–π (Comb Sort)

# 1. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ä–∞—Å—á–µ—Å—Ç–∫–æ–π

–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞—Å—á–µ—Å—Ç–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π, —Å–æ—Ä—Ç–∏—Ä—É—é—â–µ–π —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏. –û–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º, —Ç–∞–∫ –∫–∞–∫ —É—á–∏—Ç—ã–≤–∞–µ—Ç —É–∂–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏ –º–∞—Å—Å–∏–≤–∞. –≠—Ç–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –º–µ—Å—Ç–µ (on place), –Ω–µ —Ç—Ä–µ–±—É—é—â–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏, –∫—Ä–æ–º–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ —à–∞–≥–∞. –ü–æ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –Ω–µ—É—Å—Ç–æ–π—á–∏–≤–∞—è, –ø–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–∏ –æ–±–º–µ–Ω–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ—Ä—è–¥–æ–∫ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∫–ª—é—á–µ–π –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è. –ü–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤ —Ö—É–¥—à–µ–º –∏ —Å—Ä–µ–¥–Ω–µ–º —Å–ª—É—á–∞—è—Ö –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –±–ª–∏–∑–∫–æ –∫ $O(n^2)$, –Ω–æ –∑–∞ —Å—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è "—Ä–∞—Å—á–µ—Å–∫–∏" –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–µ–µ –ø—É–∑—ã—Ä—å–∫–æ–≤–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –±–æ–ª—å—à–∏—Ö –º–∞—Å—Å–∏–≤–∞—Ö.

# 2. –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ä–∞—Å—á–µ—Å—Ç–∫–æ–π

–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞—Å—á–µ—Å—Ç–∫–æ–π —É–ª—É—á—à–∞–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø—É–∑—ã—Ä—å–∫–æ–º, —É–º–µ–Ω—å—à–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å "–∑–∞–ª–∏–ø–∞–Ω–∏—è" –º–µ–ª–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–Ω—Ü–µ –º–∞—Å—Å–∏–≤–∞. –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–Ω—è—é—â–∏–π—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª (gap) —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–∞—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —Å —à–∞–≥–æ–º —É–º–µ–Ω—å—à–∞—é—â–∏–º—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ 1.3 —Ä–∞–∑–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏, –ø–æ–∫–∞ –Ω–µ –¥–æ–π–¥–µ—Ç –¥–æ 1. –ü—Ä–∏ –∫–∞–∂–¥–æ–º –ø—Ä–æ—Ö–æ–¥–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –Ω–∞—Ö–æ–¥—è—â–∏–µ—Å—è –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ gap, —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–µ–Ω—è—é—Ç—Å—è –º–µ—Å—Ç–∞–º–∏. –ö–∞–∫ —Ç–æ–ª—å–∫–æ gap –¥–æ—Å—Ç–∏–≥–∞–µ—Ç 1, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –æ–±—ã—á–Ω—É—é –ø—É–∑—ã—Ä—å–∫–æ–≤—É—é, –Ω–æ –∫ —ç—Ç–æ–º—É –º–æ–º–µ–Ω—Ç—É –º–∞—Å—Å–∏–≤ —É–∂–µ —Å–∏–ª—å–Ω–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω, —á—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É.

# 3. –ë–ª–æ–∫-—Å—Ö–µ–º–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ä–∞—Å—á–µ—Å—Ç–∫–æ–π

![](comb.jpeg)

–ü—Ä–∏–º–µ—Ä –æ—Å–Ω–æ–≤–Ω—ã—Ö —à–∞–≥–æ–≤ –∞–ª–≥–æ—Ä–∏—Ç–º–∞:

- –ù–∞—á–∞—Ç—å —Å gap = —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ / 1.3 (–æ–±—ã—á–Ω–æ)
- –ü–æ–∫–∞ gap > 1 –∏–ª–∏ –±—ã–ª–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏:
    - –°—Ä–∞–≤–Ω–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ gap, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–º–µ–Ω—è—Ç—å
    - –£–º–µ–Ω—å—à–∏—Ç—å gap (gap = gap / 1.3)
- –ö–æ–Ω–µ—Ü

# 4. –ü—Å–µ–≤–¥–æ–∫–æ–¥ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ä–∞—Å—á–µ—Å—Ç–∫–æ–π

```python
def comb_sort(arr):
    gap = len(arr)
    shrink = 1.247  # –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç
    sorted = False

    while not sorted:
        gap = int(gap / shrink)
        if gap <= 1:
            gap = 1
            sorted = True
        i = 0
        while i + gap < len(arr):
            if arr[i] > arr[i + gap]:
                arr[i], arr[i + gap] = arr[i + gap], arr[i]
                sorted = False
            i += 1
    return arr

```

# 5. –î–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

**–î–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞:**

- –ë—ã—Å—Ç—Ä–µ–µ –ø—É–∑—ã—Ä—å–∫–æ–≤–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è —É–º–µ–Ω—å—à–µ–Ω–∏—é –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞—Ä —Å –±–æ–ª—å—à–∏–º —à–∞–≥–æ–º.
- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è.
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–µ—Å—Ç–µ, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏.

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**

- –ù–µ—É—Å—Ç–æ–π—á–∏–≤–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞.
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –≤ —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ –±–ª–∏–∑–∫–∞ –∫ $O(n^2)$, —á—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ (–±—ã—Å—Ç—Ä–æ–π –∏–ª–∏ –ø–æ—Ä–∞–∑—Ä—è–¥–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏).
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ —É–º–µ–Ω—å—à–µ–Ω–∏—è gap (–æ–±—ã—á–Ω–æ 1.3).

***

# 6. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–º–µ—Ä—É –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞.

```python
import random
import usage_time
import matplotlib.pyplot as plt
import numpy as np

def comb_sort(arr):
    # –≤–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    gap = len(arr)
    shrink = 1.247
    sorted = False
    while not sorted:
        gap = int(gap / shrink)
        if gap <= 1:
            gap = 1
            sorted = True
        i = 0
        while i + gap < len(arr):
            if arr[i] > arr[i + gap]:
                arr[i], arr[i + gap] = arr[i + gap], arr[i]
                sorted = False
            i += 1
    return arr

%store comb_sort
```

# 7 –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
# 8 –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä—É—á–Ω—É—é —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É –∞–ª–≥–æ—Ä–∏—Ç–º–∞

```python
def quick_comb_sort_debug(arr):
    gap = len(arr)
    shrink = 1.247
    step = 0
    
    print(f"–ù–∞—á–∞–ª–æ: {arr}")
    
    while True:
        gap = max(1, int(gap / shrink))
        step += 1
        print(f"\n–®–∞–≥ {step}, gap={gap}:")
        
        swapped = False
        for i in range(len(arr) - gap):
            if arr[i] > arr[i + gap]:
                arr[i], arr[i + gap] = arr[i + gap], arr[i]
                swapped = True
                print(f"  –ú–µ–Ω—è–µ–º {arr[i+gap]}‚Üî{arr[i]}: {arr}")
        
        if gap == 1 and not swapped:
            break
            
    print(f"\n–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {arr}")
    return arr

# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
test = [6, 2, 8, 1, 5, 3]
print("–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:")
quick_comb_sort_debug(test.copy())
```

# –ü—Ä–æ–≤–µ—Å—Ç–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –º–∞—Å—Å–∏–≤–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö n1, n2, n3 –∏ n4 —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
# –ö–∞–∂–¥—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≤—ã–∑—ã–≤–∞—Ç—å —Ç—Ä–∏–∂–¥—ã: –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞, –º–∞—Å—Å–∏–≤–∞, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–≥–æ –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ –Ω–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞. –°–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ø–∏–∏ –æ–¥–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞).
# –ü—Ä–æ–∏–ª–ª—é—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ–∫ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –∫—Ä–∏—Ç–µ—Ä–∏—é. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

```python
sizes = [1000, 5000, 10000, 100000]

# –¢–∏–ø—ã –º–∞—Å—Å–∏–≤–æ–≤
def generate_arrays(size):
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç—Ä–∏ —Ç–∏–ø–∞ –º–∞—Å—Å–∏–≤–æ–≤ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞"""
    # –£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤
    sorted_arr = list(range(size))
    
    # –û–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫
    reversed_arr = list(range(size, 0, -1))
    
    # –°–ª—É—á–∞–π–Ω—ã–π –º–∞—Å—Å–∏–≤
    random_arr = [random.randint(1, size * 10) for _ in range(size)]
    
    return {
        'sorted': sorted_arr,
        'reversed': reversed_arr,
        'random': random_arr
    }

# –ò–∑–º–µ—Ä—è–µ–º –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
func = usage_time.get_usage_time(ndigits=6)(comb_sort)

# –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
results = {
    'sorted': [],
    'reversed': [], 
    'random': []
}

print("üîç –ò–ó–ú–ï–†–ï–ù–ò–ï –í–†–ï–ú–ï–ù–ò –°–û–†–¢–ò–†–û–í–ö–ò –†–ê–°–ß–ï–°–ö–û–ô")
print("=" * 70)

for size in sizes:
    print(f"\nüìä –†–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞: {size} —ç–ª–µ–º–µ–Ω—Ç–æ–≤")
    print("-" * 50)
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤—ã –æ–¥–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
    arrays = generate_arrays(size)
    
    for array_type, arr in arrays.items():
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–ø–∏—é –º–∞—Å—Å–∏–≤–∞
        time_taken = func(arr.copy())
        results[array_type].append(time_taken)
        
        print(f"  {array_type:>8}: {time_taken:.6f} —Å–µ–∫")

# –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–Ø –†–ï–ó–£–õ–¨–¢–ê–¢–û–í

# 1. –ì—Ä–∞—Ñ–∏–∫ –ø–æ —Ç–∏–ø–∞–º –º–∞—Å—Å–∏–≤–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
plt.figure(figsize=(15, 10))

# –ü–æ–¥–≥—Ä–∞—Ñ–∏–∫ 1: –í—Ä–µ–º—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –º–∞—Å—Å–∏–≤–æ–≤
plt.subplot(2, 2, 1)
x_pos = np.arange(len(sizes))
width = 0.25

plt.bar(x_pos - width, results['sorted'], width, label='–£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π', alpha=0.8)
plt.bar(x_pos, results['reversed'], width, label='–û–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫', alpha=0.8)
plt.bar(x_pos + width, results['random'], width, label='–°–ª—É—á–∞–π–Ω—ã–π', alpha=0.8)

plt.xlabel('–†–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞')
plt.ylabel('–í—Ä–µ–º—è, —Å–µ–∫—É–Ω–¥—ã')
plt.title('–í—Ä–µ–º—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –º–∞—Å—Å–∏–≤–æ–≤')
plt.xticks(x_pos, sizes)
plt.legend()
plt.grid(True, alpha=0.3)

# –ü–æ–¥–≥—Ä–∞—Ñ–∏–∫ 2: –õ–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫
plt.subplot(2, 2, 2)
for array_type, times in results.items():
    plt.plot(sizes, times, 'o-', linewidth=2, markersize=6, label=array_type)

plt.xlabel('–†–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞')
plt.ylabel('–í—Ä–µ–º—è, —Å–µ–∫—É–Ω–¥—ã')
plt.title('–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –º–∞—Å—Å–∏–≤–∞')
plt.xscale('log')
plt.yscale('log')
plt.legend()
plt.grid(True, alpha=0.3)

# –ü–æ–¥–≥—Ä–∞—Ñ–∏–∫ 3: –û—Ç–Ω–æ—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
plt.subplot(2, 2, 3)
ratios_reversed = [rev/srt for srt, rev in zip(results['sorted'], results['reversed'])]
ratios_random = [rnd/srt for srt, rnd in zip(results['sorted'], results['random'])]

plt.plot(sizes, ratios_reversed, 's-', label='–û–±—Ä–∞—Ç–Ω—ã–π/–£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π')
plt.plot(sizes, ratios_random, 'o-', label='–°–ª—É—á–∞–π–Ω—ã–π/–£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π')
plt.axhline(y=1, color='red', linestyle='--', alpha=0.5)

plt.xlabel('–†–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞')
plt.ylabel('–û—Ç–Ω–æ—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏')
plt.title('–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å')
plt.legend()
plt.grid(True, alpha=0.3)

# –ü–æ–¥–≥—Ä–∞—Ñ–∏–∫ 4: –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
plt.subplot(2, 2, 4)
plt.axis('off')

# –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É
table_data = []
headers = ['–†–∞–∑–º–µ—Ä'] + [f'{size}' for size in sizes]

for array_type in ['sorted', 'reversed', 'random']:
    row = [array_type] + [f'{time:.4f}' for time in results[array_type]]
    table_data.append(row)

table = plt.table(cellText=table_data,
                  colLabels=headers,
                  cellLoc='center',
                  loc='center',
                  bbox=[0, 0, 1, 1])

table.auto_set_font_size(False)
table.set_fontsize(10)
table.scale(1, 2)

plt.title('–¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (—Å–µ–∫—É–Ω–¥—ã)')

plt.tight_layout()
plt.show()

# 2. –û—Ç–¥–µ–ª—å–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –º–∞—Å—Å–∏–≤–∞
plt.figure(figsize=(15, 5))

colors = {'sorted': 'green', 'reversed': 'red', 'random': 'blue'}

for i, array_type in enumerate(['sorted', 'reversed', 'random'], 1):
    plt.subplot(1, 3, i)
    plt.plot(sizes, results[array_type], 'o-', color=colors[array_type], 
             linewidth=2, markersize=8)
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Ç–æ—á–∫–∏
    for size, time in zip(sizes, results[array_type]):
        plt.annotate(f'{time:.4f}—Å', (size, time), 
                    textcoords="offset points", xytext=(0,10), 
                    ha='center', fontsize=8)
    
    plt.xlabel('–†–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞')
    plt.ylabel('–í—Ä–µ–º—è, —Å–µ–∫—É–Ω–¥—ã')
    plt.title(f'–¢–∏–ø: {array_type}')
    plt.grid(True, alpha=0.3)

plt.tight_layout()
plt.show()

# –í–´–í–û–î –°–¢–ê–¢–ò–°–¢–ò–ö–ò
print("\nüìà –°–¢–ê–¢–ò–°–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó")
print("=" * 70)

for array_type in ['sorted', 'reversed', 'random']:
    times = results[array_type]
    print(f"\n{array_type.upper():>15}:")
    for size, time in zip(sizes, times):
        print(f"  {size:6d} —ç–ª.: {time:8.4f} —Å–µ–∫")
    
    # –í—ã—á–∏—Å–ª—è–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–æ—Å—Ç–∞
    if len(times) > 1:
        growth = times[-1] / times[0]
        print(f"  –†–æ—Å—Ç –≤—Ä–µ–º–µ–Ω–∏ ({sizes[-1]}/{sizes[0]}): {growth:.2f}x")

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
print(f"\n‚ö° –°–†–ê–í–ù–ï–ù–ò–ï –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–ò:")
print(f"–£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ {results['reversed'][-1]/results['sorted'][-1]:.2f} —Ä–∞–∑–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ")
print(f"–°–ª—É—á–∞–π–Ω—ã–π –º–∞—Å—Å–∏–≤ —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ {results['random'][-1]/results['sorted'][-1]:.2f} —Ä–∞–∑–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ")
```
